<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>

    <link rel="stylesheet" href="style/style.css">
</head>
<body class='vertikal-flex'>
    
        <h1>Login</h1>
        <p id='result'></p>

<!-- START USER HINZUFÜGEN -->
       <form id="form" method="post">
            <input type="text", id="form_post_name" placeholder="Benutzername"/>
            <input type="submit" value="Add"/>
       </form>

         <div>
            <h3>The Following data is successfuly posted</h3>
            <h4 id="post_name"></h4>
            <h5 id="post_id"></h5>
         </div>
         <p>&nbsp;</p>

<!-- END USER HINZUFÜGEN -->

<!-- START USER HERAUSLESEN -->
<form id="get_form" method="get">
   <!-- <input type="text", id="form_name" placeholder="Name"/></br>-->
    <input type="text", id="form_get_id" placeholder="Id"/>
    <input type="submit" value="Search"/>
 </form>

 <div>
    <h3>The Following data were successfuly found</h3>
    <h4 id="get_name"></h4>
    <h5 id="get_id"></h5>
</div>

<!-- END USER HERAUSLESEN -->

    
</body>
<script>
// START USER HINZUFÜGEN

    var form = document.getElementById('form')

    form.addEventListener('submit', function(e) {
        e.preventDefault()

        var name = document.getElementById('form_post_name').value
        var id = Date.now()
        
// ID options:
        //Math.random().toString(16).slice(2) 
        //Date.now() 
        //document.getElementById('form_id').value

    //API Fetch POST
    fetch('https://343505-26.web.fhgr.ch/api/jump-and-run/spieler/', {
        method: 'POST', 
        body: JSON.stringify({
            name:name,
            id:id,
    }),
    // Adding headers to the request
    headers: {
        "Content-type": "application/json; charset=UTF-8"
    }
    })

    .then(function(response){ 
    return response.json()})
    .then(function(data)
    {console.log(data)
    name=document.getElementById("post_name")
    id=document.getElementById("post_id")
    name.innerHTML = data.name
    id.innerHTML = data.id
    }).catch(error => console.error('Error:', error)); 
    });

// END USER HINZUFÜGEN

// START USER HERAUSLESEN

    var form = document.getElementById('get_form')

    form.addEventListener('submit', function(e) {
        e.preventDefault()

    var get_id = document.getElementById('form_get_id').value

    fetch('https://343505-26.web.fhgr.ch/api/jump-and-run/spieler/' + get_id)
    .then(response => response.json())
    .then(result => {
        console.log(result);
        document.getElementById('get_name').innerText = result.name;
        document.getElementById('get_id').innerText = result.id;

    })
    })

// END USER HERAUSLESEN
</script>
</html>